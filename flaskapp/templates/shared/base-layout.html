{% extends "/skeleton.html" %}


{% block HEADERTAGS %}
{{ h.stylesheet_tag('//cdn.muicss.com/mui-latest/css/mui.min.css') }}
{# { h.stylesheet_tag(h.static('style.min.css')) } #}
<script>
  window.addEventListener('load', function() {
    $script('//cdn.muicss.com/mui-latest/js/mui.min.js', 'mui');
  });
</script>

{% with messages = get_flashed_messages() -%}
{% if messages -%}
<script>
  window.addEventListener('load', function() {
    var ul = document.createElement('ul'),
        li;

    ul.className = 'mui-list-unstyled';
    ul.style.position = 'fixed';
    ul.style.top = 0;
    ul.style.right = 0;

    {% for message in messages: %}
    li = document.createElement('li');
    li.textContent = "{{ message }}";
    ul.appendChild(li);
    {% endfor %}

    document.body.appendChild(ul);

    setTimeout(function(){
      ul.parentNode.removeChild(ul);
    }, 6500);
  });
</script>
{%- endif %}
{%- endwith %}
{% endblock %}


{% block HTML %}
<header class="mui-appbar">
  <div class="mui-container mui-appbar-line-height">
    <span class="mui-text-title mui-text-white">Flaskapp</span>
  </div>
</header>
<div class="mui-container">
  <div class="mui-panel">
    {% block BODY %}{% endblock %}
  </div>
</div>
<footer id="g-footer">
  {{ base_footer_html() }}
</footer>
{% endblock %}


{% macro base_header_html() -%}
<nav class="navbar navbar-default" role="navigation">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse"
              data-target="#header-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Flaskapp</a>
    </div>
    <div class="collapse navbar-collapse" id="header-navbar">
      <ul class="nav navbar-nav">
        <li><a href="{{ url_for('content.features') }}">Features</a></li>
        <li><a href="/pricing">Pricing</a></li>        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        {% if g.user.is_authenticated(): %}
        <li><a href="{{ url_for('dashboard.home') }}">Dashboard</a></li>
        {% endif %}
        <li><a href="/support">Support</a></li>
        {% if g.user.is_authenticated(): %}
        <li class="dropdown">
          <a data-toggle="dropdown" href="#">{{ g.user.email }} <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="#">Account Settings</a></li>
            <li><a href="#">Send Feedback...</a></li>
            <li><a href="{{ url_for('auth.logout') }}">Log out</a></li>
          </ul>
        </li>
        {% else: %}
        <li><a href="{{ url_for('auth.login') }}">Log in</a></li>
        <li><a href="{{ url_for('auth.create_account') }}" class="btn btn-default">Sign up</a></li>
        {% endif %}
      </ul>
    </div>
  </div>
</nav>
{%- endmacro %}


{% macro base_footer_html() -%}
<nav role="navigation">
  <div class="container-fluid">
    &copy;{{h.datetime.datetime.today().year}} Flaskapp
    <a href="/about">About</a>
  </div>
</nav>
{%- endmacro %}
